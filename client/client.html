<html>
<head>
<title>PantherPoint Client</title>
<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" />
    <style>
    h1 {
    font-family: 'Open Sans', sans-serif;
        }
    </style>
</head>
<body>



<div class="text-center" id="main">
    <h1>PantherPoint Client</h1>
    <p>Indtast password for at connecte til sk√¶rmen:</p>
    <input class="input-lg" type="text" value="" id="tekstfelt"><br><br>
    <p>Indtast dit navn:</p>
    <input class="input-sm" type="text" value="" id="navnefelt"><br><br>
    <input class="btn btn-primary" type="button" value="Connect" id="btn_connect">
    <!--<input class="btn btn-primary" type="button" value="Add loginCode tuple" id="btn_add"> -->
    <br>
    <div id="log"></div>
</div>

    
<script src="/socket.io/socket.io.js"></script>
<script src="/linda/linda.js"></script>
<script src="/jquery/jquery.js"></script>    
<script>
  var server_url = "http://localhost:3000";

  var print = function(msg){
    $("#log").prepend( $("<p>").text(msg) );
  };    
    
    var socket = io.connect(server_url);

/*
  linda.io.on("connect", function(){
    print("connected to distributing server " + server_url + "/main");

    // receive chat messages
    ts.watch({type: "player"}, function(err, tuple){
      print("> " + tuple.data.message + "(from:" + tuple.from + ")");
    });
  });
*/
  // on page load
  jQuery(function(){

    $("#btn_connect").click(function(){
        name = $("#navnefelt").val();
        room = $("#tekstfelt").val();
        var linda = new Linda().connect(socket);
        var ts = linda.tuplespace(room);
        
        ts.write({type: "player", name: name});
      });
      
    /*  
      
    // send chat message
    $("#btn_connect").click(function(){
      var msg = $("#tekstfelt").val();
        
      });
          ts.readp({type: "player", message: msg}, function(err, tuple){
            if(tuple == null){
              print(err);
            } else if(tuple.data.message == msg) {
              print("Connecting to room " + msg);
                var name = $("#navnefelt").val();
                var room = $("#tekstfelt").val();
                var ts = linda.tuplespace(room);
                ts.write({type: "player", name: name}); 
            } else {
               print("Password does not exist"); 
            }
          });
        });
        
*/
    $("#btn_add").click(function(){
      var msg = $("#tekstfelt").val();
      ts.write({type: "player", name: msg});
        console.log("Added to tuplespace: " + msg)
    });
    });

</script>

</body>
</html>